{% extends 'registrations/admin/base.html' %}
{% load static %}

{% block page_title %}{{ page_title|default:'Edit Dimension' }}{% endblock %}

{% block content %}
<div class="fade-in-up">
  <div class="edit-form-container">
    <div class="edit-form-header">
      <div>
        <h2 style="font-size: 28px; font-weight: 600; letter-spacing: -0.02em; margin-bottom: 8px; color: hsl(var(--admin-foreground));">
          {{ page_title|default:'Edit Dimension' }}
        </h2>
        {% if dimension %}
        <p style="color: hsl(var(--admin-muted-foreground)); font-size: 15px;">
          Code: {{ dimension.code }}
        </p>
        {% endif %}
      </div>
      <a href="{% url 'admin_settings' %}" class="btn btn-secondary">
        <iconify-icon icon="lucide:arrow-left"></iconify-icon>
        Back to Settings
      </a>
    </div>

    <form method="post" class="admin-edit-form">
      {% csrf_token %}
      
      <fieldset class="form-fieldset">
        <legend>Dimension Information</legend>
        <div class="form-grid">
          <div class="form-group">
            <label for="{{ form.code.id_for_label }}">{{ form.code.label }}</label>
            {{ form.code }}
            {% if form.code.errors %}
              <div class="form-error">{{ form.code.errors }}</div>
            {% endif %}
            <small class="form-help">Single letter code (A, S, P, I, R)</small>
          </div>
          
          <div class="form-group" style="grid-column: 1 / -1;">
            <label for="{{ form.name.id_for_label }}">{{ form.name.label }}</label>
            {{ form.name }}
            {% if form.name.errors %}
              <div class="form-error">{{ form.name.errors }}</div>
            {% endif %}
          </div>
          
          <div class="form-group" style="grid-column: 1 / -1;">
            <label for="{{ form.description.id_for_label }}">{{ form.description.label }}</label>
            {{ form.description }}
            {% if form.description.errors %}
              <div class="form-error">{{ form.description.errors }}</div>
            {% endif %}
          </div>
          
          <div class="form-group">
            <label for="{{ form.display_order.id_for_label }}">{{ form.display_order.label }}</label>
            {{ form.display_order }}
            {% if form.display_order.errors %}
              <div class="form-error">{{ form.display_order.errors }}</div>
            {% endif %}
            <small class="form-help">Lower numbers appear first</small>
          </div>
          
          <div class="form-group checkbox-group">
            <label class="checkbox-label">
              {{ form.is_active }}
              <span>{{ form.is_active.label }}</span>
            </label>
            {% if form.is_active.errors %}
              <div class="form-error">{{ form.is_active.errors }}</div>
            {% endif %}
          </div>
        </div>
      </fieldset>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">
          <iconify-icon icon="lucide:save"></iconify-icon>
          Save Changes
        </button>
        <a href="{% url 'admin_settings' %}" class="btn btn-secondary">
          Cancel
        </a>
        {% if dimension %}
        <form method="post" action="{% url 'delete_dimension' dimension.id %}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this dimension? This action cannot be undone.');">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger">
            <iconify-icon icon="lucide:trash-2"></iconify-icon>
            Delete
          </button>
        </form>
        {% endif %}
      </div>
    </form>
  </div>
</div>
{% endblock %}
